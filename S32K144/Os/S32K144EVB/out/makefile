# ###*B*###
#
# ERIKA Enterprise - a tiny RTOS for small microcontrollers
# 
# Copyright (C) 2002-2018 Evidence Srl
# 
# This file is part of ERIKA Enterprise.
# 
# See LICENSE file.
#
# ###*E*###

############################################################################
#
# This file is generated by RT-Druid.
# Please do not modify it.
#
############################################################################

############################################################################
#
# Version Check
#
############################################################################
OS_EE_RTD_GEN_VERSION:=12345

export	OS_EE_RTD_GEN_VERSION

############################################################################
#
# Automatic options
#
############################################################################
ifneq ($(if $(filter OS_EE_RTD_BUILD_ENV_%,$(OS_EE_OPT)),yes,), yes)
OS_EE_OPT += OS_EE_RTD_BUILD_ENV_CYGWIN
endif	# OS_EE_RTD_BUILD_ENV_%
export OS_EE_OPT


############################################################################
#
# Application base directory
#
############################################################################
OS_EE_APP_BASE_DIR := ..

export OS_EE_APP_BASE_DIR

OS_EE_APP_OUT_DIR := .

export OS_EE_APP_OUT_DIR


############################################################################
#
# Erika Enterprise base directory
#
############################################################################
ifdef OS_EE_BASE_DIR
$(warning OS_EE_BASE_DIR is set, but will be overridden)
endif # OS_EE_BASE_DIR

OS_EE_BASE_DIR := $(shell cygpath `cygpath -ms '$(abspath $(OS_EE_APP_BASE_DIR)/erika)'`)
export OS_EE_BASE_DIR


############################################################################
#
# Sources
#
############################################################################
OS_EE_APP_CFG_SRCS += ee_applcfg.c
OS_EE_APP_CFG_SRCS += hal.c
OS_EE_APP_CFG_SRCS += code.c
OS_EE_APP_CFG_SRCS += task.c


export OS_EE_APP_CFG_SRCS


############################################################################
#
# Main Rules
#
############################################################################
.PHONY: all clean docs

all:    $(OS_EE_BASE_DIR)/mk/ee.mk $(OS_EE_BASE_DIR)/lib
	@$(MAKE) -f $(OS_EE_BASE_DIR)/mk/ee.mk all

clean:  $(OS_EE_BASE_DIR)/mk/ee.mk
	@$(MAKE) -f $(OS_EE_BASE_DIR)/mk/ee.mk clean

$(OS_EE_BASE_DIR)/lib: $(OS_EE_BASE_DIR)/mk/ee.mk
	@$(MAKE) -C $(OS_EE_BASE_DIR) all

$(OS_EE_BASE_DIR)/mk/ee.mk:
	@$(MAKE) -C $(OS_EE_BASE_DIR) mk

docs: $(OS_EE_BASE_DIR)/mk/ee.mk
	@$(MAKE) -C $(OS_EE_BASE_DIR)/doc docs


PHONY: upload

-include $(OS_EE_BASE_DIR)/mk/ee_path_helper.mk

ifeq	($(call iseeopt, OS_EE_RTD_BUILD_ENV_CYGWIN), yes)
upload:
ifeq	($(PROCESSOR_ARCHITECTURE),AMD64)
	cd $(OS_EE_APP_BASE_DIR)/out && "preference_lauterbach__path_for_trace32 not defined/bin/windows64/t32marm.exe" -c "preference_lauterbach__path_for_trace32 not defined/config.t32" -s t32.cmm
else	# PROCESSOR_ARCHITECTURE=AMD64
	cd $(OS_EE_APP_BASE_DIR)/out && "preference_lauterbach__path_for_trace32 not defined/bin/windows/t32marm.exe" -c "preference_lauterbach__path_for_trace32 not defined/config.t32" -s t32.cmm
endif	# PROCESSOR_ARCHITECTURE=AMD64
endif	# OS_EE_RTD_BUILD_ENV_CYGWIN



############################################################################
#
# End
#
############################################################################
